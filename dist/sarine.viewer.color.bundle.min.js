/*!
sarine.viewer.color - v0.6.2 -  Wednesday, November 15th, 2017, 7:00:42 PM 
 The source code, name, and look and feel of the software are Copyright Â© 2015 Sarine Technologies Ltd. All Rights Reserved. You may not duplicate, copy, reuse, sell or otherwise exploit any portion of the code, content or visual design elements without express written permission from Sarine Technologies Ltd. The terms and conditions of the sarine.com website (http://sarine.com/terms-and-conditions/) apply to the access and use of this software.
 */
(function(){var a,b,c=function(a,b){return function(){return a.apply(b,arguments)}},d={}.hasOwnProperty,e=function(a,b){function c(){this.constructor=a}for(var e in b)d.call(b,e)&&(a[e]=b[e]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};b=function(){function a(b){console.log(""),this.first_init_defer=$.Deferred(),this.full_init_defer=$.Deferred(),this.src=b.src,this.element=b.element,this.autoPlay=b.autoPlay,this.callbackPic=b.callbackPic,this.id=this.element[0].id,this.element=this.convertElement(),Object.getOwnPropertyNames(a.prototype).forEach(function(a){if("Error"===this[a].name)return console.error(this.id,a,"Must be implement",this)},this),this.element.data("class",this),this.element.on("play",function(a){return $(a.target).data("class").play.apply($(a.target).data("class"),[!0])}),this.element.on("stop",function(a){return $(a.target).data("class").stop.apply($(a.target).data("class"),[!0])}),this.element.on("cancel",function(a){return $(a.target).data("class").cancel().apply($(a.target).data("class"),[!0])})}var b;return b=ResourceManager.getInstance(),function(){return console.error(this.id,"must be implement")},a.prototype.first_init=Error,a.prototype.full_init=Error,a.prototype.play=Error,a.prototype.stop=Error,a.prototype.convertElement=Error,a.prototype.cancel=function(){return b.cancel(this)},a.prototype.loadImage=function(a){return b.loadImage.apply(this,[a])},a.prototype.loadAssets=function(a,b){var c,d,e,f,g,h;if(null!==a&&a.length>0){for(e=[],g=0,h=a.length;g<h;g++)d=a[g],"script"===d.element?e.push(d.src+cacheVersion):(c=document.createElement(d.element),c.href=d.src+cacheVersion,c.rel="stylesheet",c.type="text/css",$(document.head).prepend(c));f=0,e.forEach(function(a){return $.getScript(a,function(){if(++f===e.length)return b()})})}},a.prototype.setTimeout=function(a,c){return b.setTimeout.apply(this,[this.delay,c])},a}(),this.Viewer=b,a=function(a){function b(a){this.preloadAssets=c(this.preloadAssets,this);var d,e,f;b.__super__.constructor.call(this,a),this.isAvailble=!0,this.colorGradeMaps={1:"D",2:"E",3:"F",4:"G",5:"H",6:"I",7:"J",8:"K",9:"L",10:"M",11:"N",12:"OP",13:"QR",14:"ST",15:"UV",16:"WX",17:"YZ"},this.resourcesPrefix=a.baseUrl+"atomic/v1/assets/",this.colorAssets=a.baseUrl+"atomic/v1/js/color-assets/clean/",this.atomConfig=configuration.experiences.filter(function(a){return"colorExperience"===a.atom})[0],this.resources=[{element:"link",src:"owl.carousel.css"},{element:"script",src:"owl.carousel.min.js"}],d=".owl-carousel .item{  margin: 1px;border-radius:25px; }",d+=".owl-carousel .item img{  display: block;  width: 100%;  height: auto; }",d+=".owl-item.active.center{    -webkit-transform: scale(1.7)}",d+=".owl-stage {height:300px;padding-top:20px}",e=document.head||document.getElementsByTagName("head")[0],f=document.createElement("style"),f.type="text/css",f.styleSheet?f.styleSheet.cssText=d:f.appendChild(document.createTextNode(d)),e.appendChild(f),this.pluginDimention=this.atomConfig.ImageSize&&this.atomConfig.ImageSize.height?this.atomConfig.ImageSize.height:300,this.domain=window.coreDomain,this.numberOfImages=this.atomConfig.NumberOfImages}return e(b,a),b.prototype.convertElement=function(){return this.element.append('<div class="owl-carousel owl-theme"></div>')},b.prototype.preloadAssets=function(a){var b,c,d,e,f,g,h,i,j;for(c=0,e=this.resources.map(function(a){return"script"===a.element}),f=function(a){if(++c===e.length-1&&void 0!==a)return setTimeout(function(b){return function(){return a()}}(),500)},i=this.resources,j=[],g=0,h=i.length;g<h;g++)d=i[g],b=document.createElement(d.element),"script"===d.element?($(document.body).append(b),b.onload=b.onreadystatechange=function(){return f(a)},b.src=this.resourcesPrefix+d.src+cacheVersion,b.type="text/javascript"):(b.href=this.resourcesPrefix+d.src+cacheVersion,b.rel="stylesheet",b.type="text/css"),j.push($(document.head).prepend(b));return j},b.prototype.first_init=function(){var a,b;return a=$.Deferred(),b=this,this.preloadAssets(function(){var c;return this.firstImageName=b.atomConfig.ImagePatternClean.replace("*","1"),c=b.colorAssets+"/"+this.firstImageName+cacheVersion,b.loadImage(c).then(function(c){return-1===c.src.indexOf("data:image")&&-1===c.src.indexOf("no_stone")?a.resolve(b):(b.isAvailble=!1,b.element.empty(),this.canvas=$("<canvas>"),this.canvas[0].width=c.width,this.canvas[0].height=c.height,this.ctx=this.canvas[0].getContext("2d"),this.ctx.drawImage(c,0,0,c.width,c.height),this.canvas.attr({class:"no_stone"}),b.element.append(this.canvas),a.resolve(b))})}),a},b.prototype.full_init=function(){var a,b,c,d;for(a=$.Deferred(),this.owlCarousel=this.element.find(".owl-carousel"),this.imagePath=this.colorAssets+"/",this.filePrefix=this.atomConfig.ImagePatternClean.replace(/\*.[^\/.]+$/,""),this.fileExt="."+this.atomConfig.ImagePatternClean.split(".").pop(),b=1;b<this.numberOfImages;)this.newPath=this.imagePath+this.filePrefix+b+this.fileExt,this.container=$("<div>"),this.container.attr({class:"item"}),c=$("<img>"),c.attr({src:this.newPath}),d=$("<span>").html(this.colorGradeMaps[b]),d.attr({class:"color-grade-span"}),this.container.append(d),this.container.append(c),this.owlCarousel.append(this.container),b++;return this.owlCarousel.owlCarousel({center:!0,dots:!0,margin:1,afterMove:function(){return $("owl-item").css({transform:"none"}),$("active").eq(1).css({transform:"scale(1.9)",zIndex:3e3})},onReady:function(){return a.resolve(this)}}),a},b.prototype.play=function(){},b.prototype.stop=function(){},b}(b),this.SarineColor=a}).call(this);